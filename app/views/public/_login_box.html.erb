<%= link_to "<span>登录</span>", "#", :class => 'signin' %> | <%= link_to "注册", signup_path(:to => CGI.escape(request.request_uri)) %>
<fieldset id="signin_menu"> 
  <% remote_form_for :session, :url => session_path do |form| -%>
    <%= hidden_field_tag :to, params[:to] if params[:to] %>
    <p><label for="email" class="label">邮件地址</label> <%= text_field_tag 'email' %></p>
    <p><label for="password" class="label">密码</label> <%= password_field_tag 'password' %></p>
    <p class="rememberMe"><%= check_box_tag 'remember_me' %> <label for="remember_me">记住我</label></p>
    <p class="submit">
      <%= submit_tag '登 录' %>
    </p>
    <p><%= link_to "忘记密码了？点击这里找回", forget_password_path %></p>
    </p>
  <% end -%>
</fieldset>
<script type="text/javascript"> 
  $(document).ready(function() {
  $(".signin").click(function() {
    $("fieldset#signin_menu").toggle();
    $(".signin").toggleClass("menu-open");
    $("#email").focus();
  });

  $("fieldset#signin_menu").mouseup(function() {
    return false
  });
  $(document).mouseup(function(e) {
    if($(e.target).parent("a.signin").length==0) {
      $(".signin").removeClass("menu-open");
      $("fieldset#signin_menu").hide();
    }
  });
 });
 </script>