<% @page_title = "提交学校信息" -%>
<% @body_class = "schools" -%>

<% content_for :fullsize do -%>
  <div class="box" id="schoolsPostNew">
    <div class="boxOuter">
      <div class="boxInner">
        <h2><!-- --></h2>
        <div class="contents">
          
        <div class="school-steps">
          <ol class="clearfix">
          <li class="first <%= 'current' if @step == 'basic' %>"> 编辑学校基本信息</li>
          <li class="middle <%= 'current' if @step == 'traffic' %>"> 编辑交通信息</li>
          <li class="middle <%= 'current' if @step == 'need' %>"> 编辑学校需求</li>
          <li class="last <%= 'current' if @step == 'other' %>"> 编辑收集人信息<span class="hook"></span></li>
          </ol>
        </div>
          
          <% form_for :school, :url => schools_path, :html => {:id => "schoolsPostBasic"} do |f| -%>
          <!--<p><label class="label">类型</label>
            <select id="school_category" name="school[category]">
              <% School.categories.each_with_index do |p,i| -%>
                <option value="<%= i %>" <%= "selected=\"selected\"" if @school.category==i %>><%= p %></option>
              <% end -%>
            </select>
          </p>-->
           <fieldset>
            <legend>学校基本信息</legend>
          <p><label class="label">位于</label>
          <%= geo_select "school", "geo" %> <span class="require">*</span>
          <%= error_message_on @school, :geo_id %>
          </p>
          
          <p><label class="label" for="school_title">校名</label>
          <%= f.text_field :title, :size => 30, :class => "formText" %> <span class="require">*</span>
          <%= error_message_on @school, :title %>
          </p>
          
          <% f.fields_for :basic_attributes do |b| -%>
            <p><label class="label" for="school_school_basic_address">学校地址</label>
            <%= b.text_field :address, :size => 40, :class => "formText" %> <span class="require">*</span>
            <%= error_message_on @school.basic, :address %>
            <label class="small_label" for="school_school_basic_zipcode">邮编</label><%= b.text_field :zipcode, :size => 10, :class => "formText" %></p>
            
            <p><label class="label" for="school_school_basic_master">校长</label><%= b.text_field :master, :size => 10, :class => "formText" %><label class="small_label" for="school_school_basic_telephone">学校电话</label><%= b.text_field :telephone, :size => 20, :class => "formText" %></p>
          </fieldset>
            
          <fieldset>
            <legend>学校联系人</legend>
            <% f.fields_for :contact_attributes, @school.contact do |c| -%>
            <%= c.hidden_field :id %>
            <p>
              <label class="label">姓名</label>
              <%= c.text_field :name, :size => 10, :class => 'formText' %><span class="require">*</span>
              <%= error_message_on @school.contact, :name %>
              <label class="small_label">职务</label>
              <%= c.text_field :role, :size => 10, :class => 'formText' %>
              <label class="small_label">电话</label>
              <%= c.text_field :telephone, :size => 15, :class => 'formText' %><span class="require">*</span>
              <%= error_message_on @school.contact, :telephone %>
            </p>
            <p><label class="label">邮箱</label><%= c.text_field :email, :size => 15, :class => 'formText' %><label class="small_label">QQ</label><%= c.text_field :qq, :size => 15, :class => 'formText' %></p>
            <% end -%>
          </fieldset>
          
          <fieldset>
          <legend>学校基本情况</legend>
            <p><label class="label">学校规模</label><select id=“school_basic_attributes_level_amount" name="school[basic_attributes][level_amount]">
                <option/>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
            </select>年制
            <label class="small_label" for="school_school_basic_class_amount">班级</label><%= b.text_field :class_amount, :size => 10, :class => "formText" %> 个
            <label class="small_label" for="school_school_basic_teacher_amount">老师</label><%= b.text_field :teacher_amount, :size => 10, :class => "formText" %> 人
            <label class="small_label" for="school_school_basic_student_amount">学生</label><%= b.text_field :student_amount, :size => 10, :class => "formText" %> 人</p>
            <p class="radioBtn"><label class="label">图书室</label><%= radio_choice b, :has_library %></p>
            <p id="howmanybook" style="display:none"><label class="label" for="school_school_basic_book_amount">学校有图书</label><%= b.text_field :book_amount, :size => 10, :class => "formText" %> 册</p>
            <p class="radioBtn"><label class="label">电脑</label><%= radio_choice b, :has_pc %></p>
            <p id="howmanypc" style="display:none"><label class="label" for="school_school_basic_pc_amount">学校有电脑</label><%= b.text_field :pc_amount, :size => 10, :class => "formText" %> 台</p>
            <p id="online" style="display:none" class="radioBtn"><label class="label">电脑上网</label><%= radio_choice b, :has_internet %></p>
            <% f.fields_for :local_attributes, @school.local do |l| -%>
            <%= l.hidden_field :id %>
            <p class="radioBtn"><label class="label">公益团队</label><%= radio_choice l, :ngo_support %></p>
            <p style="display:none" id="ngoname"><label class="label" >团队名称</label><%= l.text_field :ngo_name, :size => 10, :class => 'formText' %></p>
            <p style="display:none" id="ngoproject"><label class="label" >已开展项目</label><%= l.text_field :ngo_projects, :size => 40, :class => "formText" %></p>
            <% end -%>
          </fieldset>
          <script type="text/javascript">
          $('#school_basic_attributes_has_library_0').delayedObserver(0.25, function(){$('#howmanybook').hide()})
          $('#school_basic_attributes_has_library_1').delayedObserver(0.25, function(){$('#howmanybook').show()})
          $('#school_basic_attributes_has_library_2').delayedObserver(0.25, function(){$('#howmanybook').hide()})
          $('#school_basic_attributes_has_pc_0').delayedObserver(0.25, function(){$('#howmanypc').hide();$('#online').hide();})
          $('#school_basic_attributes_has_pc_1').delayedObserver(0.25, function(){$('#howmanypc').show();$('#online').show();})
          $('#school_basic_attributes_has_pc_2').delayedObserver(0.25, function(){$('#howmanypc').hide();$('#online').hide();})
          $('#school_local_attributes_ngo_support_0').delayedObserver(0.25, function(){$('#ngoname').hide();$('#ngoproject').hide();})
          $('#school_local_attributes_ngo_support_1').delayedObserver(0.25, function(){$('#ngoname').show();$('#ngoproject').show();})
          $('#school_local_attributes_ngo_support_2').delayedObserver(0.25, function(){$('#ngoname').hide();$('#ngoproject').hide();})
          </script>    
          <% end -%>
              
          <p class="submit clearfix"><span class="btnWrap"><%= submit_tag "保存，下一步" %></span></p>
          <% end -%>
        </div>
      </div>
    </div>
  </div>

<% end -%>